<html>
    <head>

    </head>
    <body>
        <form action='.' method='POST'>
            {% csrf_token %}
            {{ form }}
            <input type="submit" />
            <button class='js-captcha-refresh'>Refresh</button>
        </form>

        <script src = "https://ajax.aspnetCDN.com/ajax/jQuery/jQuery-3.3.1.min.js">

        <script>
            $('.js-captcha-refresh').click(function () {
                    $form = $(this).parents('form');

                    $.getJSON($(this).data('url'), {}, function (json) {
                        // This should update your captcha image src and captcha hidden input
                    });

                    return false;
                });
        </script>


        {% comment %} <script>
            $('.captcha').click(function () {
                    $.getJSON("/captcha/refresh/", function (result) {
                        $('.captcha').attr('src', result['image_url']);
                        $('#id_captcha_0').val(result['key'])
                    });
                });
        </script> {% endcomment %}

        <script>
            $('.js-captcha-refresh').click(function () {
                    $.getJSON("/captcha/refresh/", function (result) {
                        $('.captcha').attr('src', result['image_url']);
                        $('#id_captcha_0').val(result['key'])
                    });
                });
        </script>
        
    </body>
</html>